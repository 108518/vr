var fullscreen=!1,load=function(e){if($('<a-scene wasd-controls="enabled: false" vr-mode-ui="enabled: '+fullscreen.toString()+'"></a-scene').html($("<a-entity></a-entity>").html(LZString.decompressFromEncodedURIComponent(e))).prependTo("body"),fullscreen){var n=document.querySelector("a-scene"),t=document.querySelector("a-entity");n.addEventListener("loaded",function(){t.pause(),n.addEventListener("dblclick",function(){t.play()})})}};AFRAME.registerComponent("invader",{tick:function(){var e=this.el.getAttribute("scale"),n=this.el.getAttribute("position");0==e.x&&0==e.y&&0==e.z&&(this.el.parentNode.removeChild(this.el),document.querySelector("[invader]")||(document.querySelector("a-scene").pause(),fullscreen&&alert("Congratulations! You destroyed the shapes and won."),location.reload()));for(var t in n)if(parseFloat(n[t])>1||parseFloat(n[t])<-1)return!1;document.querySelector("a-scene").pause(),fullscreen&&alert("Game over! You got hit by a shape and lost, try again."),location.reload()}}),$(function(){var e={};if(location.search.substr(1).split("&").forEach(function(n){e[n.split("=")[0]]=n.split("=")[1]}),"q"in e)load(e.q);else{var n=new Peer({key:"9a5ls6yq7ann4s4i"});fullscreen=!0,n.on("open",function(){var e=n.connect(prompt("Enter the editor ID..."));e.on("open",function(){e.on("data",function(e){load(e)})})})}});